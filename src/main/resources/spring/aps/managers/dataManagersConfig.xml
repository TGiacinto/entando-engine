<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:jee="http://www.springframework.org/schema/jee"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.0.xsd
			http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.0.xsd
			http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-4.0.xsd">
    
    <bean id="DataObjectModelManager" class="org.entando.entando.aps.system.services.dataobjectmodel.DataObjectModelManager" 
          parent="abstractService" >
        <property name="dataModelDAO" >
            <bean class="org.entando.entando.aps.system.services.dataobjectmodel.DataObjectModelDAO">
                <property name="dataSource" ref="servDataSource" />
            </bean>
        </property>
        <property name="pageManager" ref="PageManager" />
        <property name="dataObjectManager" ref="DataObjectManager" />
    </bean>
    
    <bean id="DataObjectManager" class="org.entando.entando.aps.system.services.dataobject.DataObjectManager" 
          parent="abstractEntityManager" >
        <property name="entityClassName" value="org.entando.entando.aps.system.services.dataobject.model.DataObject"/>
        <property name="entityTypeDom" ref="DataTypeDOM" />
        <property name="xmlAttributeRootElementName" value="content" />
        <property name="entityHandler">
            <bean class="org.entando.entando.aps.system.services.dataobject.parse.DataObjectHandler" />
        </property>
        <property name="entityDom">
            <bean class="org.entando.entando.aps.system.services.dataobject.parse.DataObjectDOM" />
        </property>
        <property name="dataObjectDAO" >
            <bean class="org.entando.entando.aps.system.services.dataobject.DataObjectDAO" parent="abstractEntityDAO">
                <property name="dataSource" ref="servDataSource" />
            </bean>
        </property>
        <property name="publicDataObjectSearcherDAO" ref="PublicDataObjectSearcherDAO" />
        <property name="workDataObjectSearcherDAO" ref="WorkDataObjectSearcherDAO" />
    </bean>
    
    <bean id="PublicDataObjectSearcherDAO" class="org.entando.entando.aps.system.services.dataobject.PublicDataObjectSearcherDAO">
        <property name="dataSource" ref="servDataSource" />
        <property name="forceCaseInsensitiveLikeSearch"><value>false</value></property>
    </bean>
    
    <bean id="WorkDataObjectSearcherDAO" class="org.entando.entando.aps.system.services.dataobject.WorkDataObjectSearcherDAO">
        <property name="dataSource" ref="servDataSource" />
        <property name="forceCaseInsensitiveLikeSearch"><value>false</value></property>
    </bean>
    
    <bean id="DataObjectAuthorizationHelper" class="org.entando.entando.aps.system.services.dataobject.helper.DataAuthorizationHelper" >
        <property name="dataObjectManager" ref="DataObjectManager" />
        <property name="authorizationManager" ref="AuthorizationManager" />
        <property name="langManager" ref="LangManager" />
    </bean>
    
    <bean id="BaseDataObjectRenderer" class="org.entando.entando.aps.system.services.dataobjectrenderer.BaseDataObjectRenderer" 
          parent="BaseEntityRenderer" >
        <property name="dataObjectModelManager" ref="DataObjectModelManager" />
    </bean>
    
    <bean id="DataObjectPageMapperManager" class="org.entando.entando.aps.system.services.dataobjectmapper.DataObjectPageMapperManager" 
		  parent="abstractService" >
        <property name="pageManager" ref="PageManager" />
    </bean>
    
    <bean id="DataObjectDispenserManager" class="org.entando.entando.aps.system.services.dataobjectdispenser.BaseContentDispenser" 
          parent="abstractService" >
        <property name="dataObjectRenderer" ref="BaseDataObjectRenderer" />
        <property name="dataObjectManager" ref="DataObjectManager" />
        <property name="dataAuthorizationHelper" ref="DataObjectAuthorizationHelper" />
        <property name="authorizationManager" ref="AuthorizationManager" />
    </bean>
    
	<!--
    <bean id="jacmsSearchEngineManager" class="com.agiletec.plugins.jacms.aps.system.services.searchengine.SearchEngineManager" 
              parent="abstractService" >
        <property name="factory">
            <bean class="com.agiletec.plugins.jacms.aps.system.services.searchengine.SearchEngineDAOFactory" 
                              init-method="init">
                <property name="indexDiskRootFolder">
                    <jee:jndi-lookup jndi-name="java:comp/env/indexDiskRootFolder" />
                </property>
                <property name="configManager" ref="BaseConfigManager"/>
                <property name="langManager" ref="LangManager" />
                <property name="indexerClassName">
                    <value>com.agiletec.plugins.jacms.aps.system.services.searchengine.IndexerDAO</value>
                </property>
                <property name="searcherClassName">
                    <value>com.agiletec.plugins.jacms.aps.system.services.searchengine.SearcherDAO</value>
                </property>
            </bean>
        </property>
        <property name="contentManager" ref="jacmsContentManager" />
    </bean>
    
    <bean id="jacmsContentHelper" class="org.entando.entando.plugins.jacms.aps.system.services.content.helper.ContentHelper" />
	
    <bean id="jacmsBaseContentListHelper" class="com.agiletec.plugins.jacms.aps.system.services.content.helper.BaseContentListHelper" >
        <property name="contentManager" ref="jacmsContentManager" />
    </bean>
    -->
    <bean id="DataObjectListHelper" class="org.entando.entando.aps.system.services.dataobject.widget.DataObjectListHelper" >
        <property name="contentManager" ref="DataObjectManager" />
        <!-- <property name="searchEngineManager" ref="jacmsSearchEngineManager" /> -->
        <property name="userFilterDateFormat">
            <value>${jacms.frontend.userfilter.dateFormat}</value>
        </property>
    </bean>
    
    <bean id="DataObjectViewerHelper" class="org.entando.entando.aps.system.services.dataobject.widget.DataObjectViewerHelper" >
        <property name="contentDispenser" ref="DataObjectDispenserManager" />
        <property name="contentManager" ref="DataObjectManager" />
        <property name="contentModelManager" ref="DataObjectModelManager" />
        <property name="contentAuthorizationHelper" ref="DataObjectAuthorizationHelper" />
    </bean>
    <!--
    <bean id="jacmsCacheWrapperManager" class="com.agiletec.plugins.jacms.aps.system.services.cache.CmsCacheWrapperManager" 
          parent="abstractService" >
        <property name="cacheInfoManager" ref="CacheInfoManager" />
        <property name="contentManager" ref="jacmsContentManager" />
    </bean>
    -->
    <!-- APIs -->
    <!--
    <bean id="jacmsApiContentInterface" class="org.entando.entando.plugins.jacms.aps.system.services.api.ApiContentInterface" >
        <property name="contentManager" ref="jacmsContentManager" />
        <property name="contentAuthorizationHelper" ref="jacmsContentAuthorizationHelper" />
        <property name="userManager" ref="UserManager" />
        <property name="pageManager" ref="PageManager" />
        <property name="resourceManager" ref="jacmsResourceManager" />
        <property name="groupManager" ref="GroupManager" />
        <property name="categoryManager" ref="CategoryManager" />
        <property name="contentListHelper" ref="jacmsBaseContentListHelper" />
        <property name="contentDispenser" ref="jacmsBaseContentDispenser" />
        <property name="contentModelManager" ref="jacmsContentModelManager" />
    </bean>

    <bean id="jacmsApiContentTypeInterface" class="org.entando.entando.plugins.jacms.aps.system.services.api.ApiContentTypeInterface" >
        <property name="contentManager" ref="jacmsContentManager" />
        <property name="contentModelManager" ref="jacmsContentModelManager" />
    </bean>
    
    <bean id="jacmsApiContentModelInterface" class="org.entando.entando.plugins.jacms.aps.system.services.api.ApiContentModelInterface" >
        <property name="contentManager" ref="jacmsContentManager" />
        <property name="contentModelManager" ref="jacmsContentModelManager" />
    </bean>
	
	-->
	
	<bean id="DataTypeDOM" class="org.entando.entando.aps.system.services.dataobject.parse.DataTypeDOM" 
		  parent="baseEntityTypeDom" scope="prototype">
	</bean>
    
</beans>
